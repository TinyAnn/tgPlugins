window.TGUIMobile=function(t){"use strict";var n=document,i=t(window),e=n.documentElement,a=function(t){return"undefined"==typeof t};t.fn.transform=function(t){for(var n=0;n<this.length;n++){var i=this[n].style;i.webkitTransform=i.MsTransform=i.msTransform=i.MozTransform=i.OTransform=i.transform=t}return this},t.fn.transition=function(t){"string"!=typeof t&&(t+="ms");for(var n=0;n<this.length;n++){var i=this[n].style;i.webkitTransitionDuration=i.MsTransitionDuration=i.msTransitionDuration=i.MozTransitionDuration=i.OTransitionDuration=i.transitionDuration=t}return this},t.fn.transitionEnd=function(t){function n(s){if(s.target===this)for(t.call(this,s),i=0;i<e.length;i++)a.off(e[i],n)}var i,e=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],a=this;if(t)for(i=0;i<e.length;i++)a.on(e[i],n);return this};var s=function(){var a={width:"640px",button:{showBtn:!0},shade:!0,dragable:!1},s=0,r=["ajly-wraper","ajly-close","ajly-title","ajly-main","ajly-footer","ajly-btn","ajly-html"],o=function(n){var i=this;i.layIndex=++s,i.settings=t.extend({},a,n),i.init()},l=o.prototype;l.init=function(){var t=this;this.createVessel(),this.initLayerBtns(),this.layerOffset(),i.on("resize."+this.layIndex,function(){t.layerOffset()},!1)},l.createVessel=function(){var n=this,i=this.settings,a=!!i.shade,s=!!i.closeIcon,o=i.className||"",l=['<div class="'+r[0]+" "+o+'" id="'+r[0]+this.layIndex+'">',a?'<div class="ajly-mask"></div>':"","   <div class="+r[3]+">",'       <div class="ajly-header">',s?"<i class="+r[1]+">×</i>":"","           <div class="+r[2]+">"+(i.title?i.title:"")+"</div>","       </div>",'       <div class="ajly-content">',i.content?i.content:"","       </div>","       <div class="+r[4]+"  id="+r[4]+">","       </div>","   </div>","</div>"].join("");a&&t(e).addClass(r[6]),this.$layerFragment=t(l),s&&this.$layerFragment.on("tap","."+r[1],function(){return n.closeLayer(),!1})},l.initLayerBtns=function(){var n,i,e=this,a=this.settings,s=a.button||{},o=s&&s.btns,l=o&&o.length||0,d=0,c=this.$layerFragment,u=function(){e.closeLayer()};if(s.showBtn)if(l)for(;l>d;d++)n=o[d],i=t('<button class="'+r[5]+" "+(n.className||"")+'">'+n.valueStr+"</button>"),i.tap(n.callback||u),c.find("#"+r[4]).append(i);else i=t('<button class="'+r[5]+'">确定</button>'),i.tap(function(){e.closeLayer()}),c.find("#"+r[4]).append(i)},l.layerOffset=function(){var e,a,s,o,l,d,c,u=this.settings,p=this.$layerFragment,h=i.height(),f=i.width(),m={},v=u.position||[],y=p.find("."+r[3]);e=u.width,y.css({width:e,height:"auto"}),t("#"+r[0]+this.layIndex,n.body).length||t(n.body).append(p),a=parseInt(y.width(),10),s=parseInt(y.height(),10),!v[0]||"left"!==v[0]&&"right"!==v[0]?(o=(f-a)/2,o=o>0?o:0,m.left=o):(o=0,d=v[0],m[d]=o),!v[1]||"top"!==v[1]&&"bottom"!==v[1]?(l=(h-s)/2,l=l>0?l:0,m.top=l):(o=0,c=v[1],m[c]=o),y.css(m)},l.closeLayer=function(n){n=r[0]+(n||this.layIndex),t(e).removeClass(r[6]),i.off("resize."+this.layIndex),t("#"+n).remove()};var d={vertion:"1.0",open:function(t){var n=new o(t);return n.layIndex},close:function(t){l.closeLayer(t)}};return d}();return function(){function n(n){n.preventDefault(),n.stopPropagation();var i=t(this),e=i.val(),s=i.data(a[1]),r=i.data(a[2]);return e?(s&&s.show(),r&&r.show(),!0):(s&&s.hide(),r&&r.hide(),!1)}function e(t,n){var i=n,e=i.data(a[1]),s=i.data(a[2]);e&&e.hide(),s&&s.hide()}var a=["ajic-wraper","ajic-delIcon","ajic-togglePassIcon","ajic-delIconWraper","ajic-PassIconWraper"];t.fn.ajInputOprateIcon=function(s){var r,o=t.extend({},t.fn.ajInputOprateIcon.defaults,s);return i.on("resize.ajInputOprateIcon",function(){t(this).ajInputOprateIcon()}),this.filter("input").each(function(){var n,i=t(this),e=t('<div class="'+a[0]+" "+(o.className||"")+'"></div>'),s=t("<span class="+a[3]+'><i class="fa fa-times"></i></span>'),l=i.css("_display")||"inline-block",d=i.height()||"100px",c=i.attr("type"),u=3*d/5;e.css({display:l}),s.css({height:d,width:u,"line-height":d+"px"}),i.wrap(e),e.append(s),"password"===c&&(n=t("<span class="+a[4]+'><i class="fa fa-eye"></i></span>'),n.css({height:d,width:u,"line-height":d+"px",right:u+10}),n.click(function(){clearTimeout(r),event.preventDefault(),event.stopPropagation();var t=i.attr("type"),e=n.find("i");"password"===t?(i.attr("type","url").focus(),e.addClass("fa-eye-slash").removeClass("fa-eye")):(i.attr("type","password").focus(),e.addClass("fa-eye").removeClass("fa-eye-slash"))}),e.append(n),i.data(a[2],n)),i.data(a[0],e),i.data(a[1],s),s.click(function(n){clearTimeout(r),n.preventDefault(),n.stopPropagation(),i.val("").focus(),t(this).hide()})}).on("focus.opretaIcon keyup",n).on("blur.opretaIcon",function(){var n=t(this);r=setTimeout(function(t){e(t,n)},200)})},t.fn.ajInputOprateIcon.defaults={}}(),function(){var n=["aj-slideContainer","aj-slideWraper","aj-slide"],e=function(i,e){var a,s,r=this,o=t(i),l=o.find("."+n[1]),d=l.find("."+n[2]),c=d.clone(),u=d.length,p=u-1,h=o.width(),f=e.column||1,m=Math.ceil(h/f),v=(e.pauseTime||3e3,e.loop),y=(e.animSpeed,e.pagination),T=0;if(v)for(;f>T;T++)a=t(c[T]).clone(),l.append(a),a=t(c[p-T]).clone(),l.prepend(a),u+=2;if(y){for(s=t('<ul class="aj-slidePgWraper"></ul>'),T=0;p+1>T;T++)s.append("<li data-index="+T+"></li>");o.append(s)}s.on("tap",function(n){var i=t(n.target).data("index");r.slideTo(i+f)}),this.settings=e||{},this.slideWidth=m,this.slideWraper=l,this.containter=o,this.currentIndex=e.settings||0,this.touches={},this.autoPlayTimerId="",this.toucheStartTime="",this.pagination=s,l.css({width:m*u}),this.silentSlideTo(f),l.on("touchstart",function(t){r.onTouchStart.call(r,t)}),l.on("touchmove",function(t){r.onTouchMove.call(r,t)}),l.on("touchend",function(t){r.onTouchEnd.call(r,t)})},s=e.prototype;s.slideTo=function(i){var e,s,r=this,o=this.slideWraper.find("."+n[2]).length,l=this.settings.loop,d=this.settings.column,c=this.settings.pagination,u=-(i*this.slideWidth);this.settings.animSpeed||500;(a(i)||0>i)&&(i=0),i>o-1&&(i=o-1),this.currentIndex=i,this.support.transforms3d?this.slideWraper.transform("translate3d("+u+"px, 0px, 0px)"):this.slideWraper.transform("translate("+u+"px, 0px)"),l&&(o-d===i&&r.slideWraper.transitionEnd(function(){r.silentSlideTo(d)}),0===i&&r.slideWraper.transitionEnd(function(){r.silentSlideTo(o-2*d)})),c&&(e=r.pagination,s=e.find("li")[r.currentIndex-d],t(s).addClass("active").siblings().removeClass("active"))},s.silentSlideTo=function(t){var n=this.settings.animSpeed||500,i=this;i.slideWraper.transition(0),i.slideTo(t),setTimeout(function(){i.slideWraper.transition(n)},100)},s.autoplay=function(){var t,i=this,e=i.settings,a=i.pausing,s=i.slideWraper.find("."+n[2]).length,r=e.pauseTime,o=(e.duration,e.loop),l=e.animSpeed||500;if(a)clearTimeout(i.autoPlayTimerId),i.autoPlayTimerId=setTimeout(function(){i.slideWraper.transition(l),i.autoplay()},r);else{if(t=i.currentIndex+1,i.slideTo(t),s-1===t){if(!o)return!1;i.slideWraper.transitionEnd(function(){i.silentSlideTo(0)})}i.slideWraper.transitionEnd(function(){clearTimeout(i.autoPlayTimerId),i.autoPlayTimerId=setTimeout(function(){i.slideWraper.transition(l),i.autoplay()},r)})}},s.onTouchStart=function(t){var n=this;n.pausing=!0,n.touches.startX=n.touches.currentX=t.touches[0].pageX,n.wraperTranslateX=this.getTranslateX(this.slideWraper[0]),n.toucheStartTime=Date.now(),n.slideWraper.transition(0)},s.onTouchMove=function(t){var n,i=0;t.stopPropagation(),t.preventDefault(),this.touches.currentX=t.touches[0].pageX,i=this.touches.currentX-this.touches.startX,n=this.wraperTranslateX+i,this.support.transforms3d?this.slideWraper.transform("translate3d("+n+"px, 0px, 0px)"):this.slideWraper.transform("translate("+n+"px, 0px)")},s.onTouchEnd=function(t){var n=Date.now(),i=0,e=this.settings.animSpeed,a=this.touches.currentX-this.touches.startX,s=Math.abs(a),r=this.slideWidth;this.pausing=!1,this.slideWraper.transition(e),i=r/3>s&&n-this.toucheStartTime>200||10>s?this.currentIndex:0>a?++this.currentIndex:--this.currentIndex,this.slideWraper.transition(200),this.slideTo(i)},s.getTranslateX=function(t){var n,i,e,a;return e=window.getComputedStyle(t,null),window.WebKitCSSMatrix?(i=e.transform||e.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(function(t){return t.replace(",",".")}).join(", ")),a=new window.WebKitCSSMatrix("none"===i?"":i)):(a=e.MozTransform||e.OTransform||e.MsTransform||e.msTransform||e.transform||e.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=a.toString().split(",")),i=window.WebKitCSSMatrix?a.m41:parseFloat(n[4]),i||0},s.support={transforms3d:window.Modernizr&&Modernizr.csstransforms3d===!0||function(){var t=document.createElement("div").style;return"webkitPerspective"in t||"MozPerspective"in t||"OPerspective"in t||"MsPerspective"in t||"perspective"in t}()};var r=function(n,i){var a=t(n),s=i.pauseTime,r=i.autoplay,o=new e(a,i);return r&&(o.autoPlayTimerId=setTimeout(function(){o.autoplay()},s)),o};t.fn.ajSlider=function(n){var e=t.extend({},t.fn.ajSlider.defaults,n),a=e.column;return this.each(function(n,s){var o=t(s),l=r(o,e);i.on("resize.ajSlider",function(){clearTimeout(l.autoPlayTimerId),l.silentSlideTo(a),l=r(o,e)})})},t.fn.ajSlider.defaults={startSlide:0,animSpeed:500,pauseTime:3e3,autoplay:!1,pagination:!0,column:1,loop:!0}}(),{layer:s}}(Zepto);